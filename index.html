<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>It's Knot Fun - Three Dog Leash Detangle Simulation</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Three.js for 3D rendering -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="tabs">
            <div class="tab active" data-tab="simulation">Simulation</div>
            <div class="tab" data-tab="theory">Theory & Mathematics</div>
        </div>

        <div id="simulationTab" class="tab-content active">
            <h1>It's Knot Fun</h1>
            <p class="subtitle">Three Dog Leash Detangle â€” An exploration of braid theory, path planning, and topological complexity</p>

            <div class="canvas-container">
                <canvas id="simulationCanvas"></canvas>

                <!-- State Cards Overlay -->
                <div class="state-cards-overlay" id="stateCardsOverlay">
                    <!-- Walker State Card -->
                    <div class="state-card walker-card" id="walkerStateCard">
                        <div class="state-card-header">
                            <span class="state-card-icon">ğŸš¶</span>
                            <span class="state-card-name">Walker</span>
                        </div>
                        <div class="state-card-body">
                            <div class="state-indicator" id="walkerStateIndicator">
                                <span class="state-label">State:</span>
                                <span class="state-value" id="walkerStateValue">Walking</span>
                            </div>
                            <div class="state-detail" id="walkerHandHeight">
                                <span class="detail-label">Hand:</span>
                                <span class="detail-value" id="walkerHandValue">Normal</span>
                            </div>
                        </div>
                    </div>

                    <!-- Dog State Cards -->
                    <div class="dog-cards-container" id="dogCardsContainer">
                        <div class="state-card dog-card dog-a" id="dogACard">
                            <div class="state-card-header">
                                <span class="state-card-icon">ğŸ•</span>
                                <span class="state-card-name">Dog A</span>
                            </div>
                            <div class="state-card-body">
                                <div class="state-indicator">
                                    <span class="state-label">Behavior:</span>
                                    <span class="state-value" id="dogABehavior">Wandering</span>
                                </div>
                                <div class="state-detail">
                                    <span class="detail-label">Energy:</span>
                                    <div class="energy-bar" id="dogAEnergy">
                                        <div class="energy-fill"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="state-card dog-card dog-b" id="dogBCard">
                            <div class="state-card-header">
                                <span class="state-card-icon">ğŸ•</span>
                                <span class="state-card-name">Dog B</span>
                            </div>
                            <div class="state-card-body">
                                <div class="state-indicator">
                                    <span class="state-label">Behavior:</span>
                                    <span class="state-value" id="dogBBehavior">Wandering</span>
                                </div>
                                <div class="state-detail">
                                    <span class="detail-label">Energy:</span>
                                    <div class="energy-bar" id="dogBEnergy">
                                        <div class="energy-fill"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="state-card dog-card dog-c" id="dogCCard">
                            <div class="state-card-header">
                                <span class="state-card-icon">ğŸ•</span>
                                <span class="state-card-name">Dog C</span>
                            </div>
                            <div class="state-card-body">
                                <div class="state-indicator">
                                    <span class="state-label">Behavior:</span>
                                    <span class="state-value" id="dogCBehavior">Wandering</span>
                                </div>
                                <div class="state-detail">
                                    <span class="detail-label">Energy:</span>
                                    <div class="energy-bar" id="dogCEnergy">
                                        <div class="energy-fill"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="controls">
                <div class="control-group">
                    <label>Walker Speed</label>
                    <input type="range" id="walkerSpeedSlider" min="0" max="3" value="1" step="0.25">
                    <span class="value-display" id="walkerSpeedValue">1.0x</span>
                </div>
                <div class="control-group">
                    <label>Dog Energy</label>
                    <input type="range" id="dogEnergySlider" min="0.5" max="3" value="1.5" step="0.25">
                    <span class="value-display" id="dogEnergyValue">1.5x</span>
                </div>
                <div class="control-group">
                    <label>Leash Length</label>
                    <input type="range" id="leashSlider" min="60" max="180" value="120" step="10">
                    <span class="value-display" id="leashValue">120px</span>
                </div>
                <div class="control-group buttons">
                    <button id="resetBtn">Reset Simulation</button>
                    <button id="pauseBtn">Pause</button>
                </div>
            </div>

            <div class="stats">
                <div class="stat">
                    <span class="stat-value" id="crossingCount">0</span>
                    <span class="stat-label">Total Crossings</span>
                </div>
                <div class="stat">
                    <span class="stat-value" id="tangleMetric">0</span>
                    <span class="stat-label">Tangle Complexity</span>
                </div>
                <div class="stat">
                    <span class="stat-value" id="activeTangles">0</span>
                    <span class="stat-label">Active Tangles</span>
                </div>
                <div class="stat">
                    <span class="stat-value" id="capstanFriction">1.0x</span>
                    <span class="stat-label">Capstan Friction</span>
                </div>
                <div class="stat">
                    <span class="stat-value" id="timeElapsed">0s</span>
                    <span class="stat-label">Time Elapsed</span>
                </div>
                <div class="stat braid-stat">
                    <span class="stat-value" id="braidWord">Îµ</span>
                    <span class="stat-label">Braid Word</span>
                </div>
            </div>

            <div class="event-log" id="eventLog">
                <div class="event">[0.0s] Simulation started â€” walk begins!</div>
            </div>
        </div>

        <div id="theoryTab" class="tab-content">
            <div class="theory-section">
                <h1>The Mathematics of Dog Leash Tangles</h1>

                <h2>Introduction: A Topological Problem</h2>
                <p>The three-dog leash problem sits at the intersection of <strong>braid theory</strong>, <strong>topology</strong>, and <strong>computational complexity</strong>. What appears as a simple daily frustrationâ€”untangling dog leashesâ€”reveals profound mathematical structures that have occupied mathematicians since the early 20th century.</p>

                <p class="doodle-annotation">But first, let's see what makes three dogs special...</p>

                <h2>Why Three Dogs Changes Everything</h2>

                <!-- Interactive Comparison Visualizer -->
                <div class="interactive-section">
                    <h3>Try It Yourself: 2 Dogs vs 3 Dogs</h3>
                    <p>Click the buttons below to add crossings. Watch how the complexity differs!</p>
                    <div id="comparison-viz-container"></div>
                </div>

                <!-- Physics Demo: Close-up thick rope simulation -->
                <div class="interactive-section">
                    <h3>Watch the Physics: Thick Rope Demo</h3>
                    <p>See real-time simulated dog movement with thick, visible leashes. Notice how crossings accumulate differently!</p>
                    <div id="physics-demo-container"></div>
                </div>

                <h3>The Two-Dog Case (Trivial)</h3>
                <p>With two dogs, the problem is degenerate. Any configuration can be resolved by having one dog walk around the other in the appropriate direction. The <strong>braid group Bâ‚‚</strong> is infinite cyclic (isomorphic to â„¤), meaning every tangle can be represented as a power of a single generator Ïƒâ‚.</p>

                <div class="explainer-card graph-paper">
                    <h3 class="card-term">Braid Group Bâ‚‚</h3>
                    <p class="card-intuition">Think of it like a dial that can spin infinitely in either direction. +1 turn, -1 turn, they always cancel out perfectly.</p>
                    <p class="card-formal">Bâ‚‚ = âŸ¨Ïƒâ‚ | âŸ© â‰… â„¤ â€” An infinite cyclic group with one generator</p>
                    <p class="card-example">5 clockwise crossings? Just do 5 counterclockwise. Done!</p>
                </div>

                <h3>The Three-Dog Case (Non-Trivial)</h3>
                <p>With three dogs, we enter the realm of <strong>Bâ‚ƒ</strong>, the braid group on three strands. This group is fundamentally different:</p>

                <div class="chalk-comparison">
                    <div class="chalk-column">
                        <h4 class="chalk-header">TWO STRANDS (Bâ‚‚)</h4>
                        <ul class="chalk-list">
                            <li>One generator: Ïƒâ‚</li>
                            <li>Abelian (order doesn't matter)</li>
                            <li>Ïƒâ‚Ïƒâ‚â»Â¹ = Îµ always</li>
                            <li class="chalk-analogy">Like a single dial</li>
                        </ul>
                        <div class="chalk-verdict easy">âœ“ Always untangles</div>
                    </div>
                    <div class="chalk-divider">vs</div>
                    <div class="chalk-column">
                        <h4 class="chalk-header">THREE STRANDS (Bâ‚ƒ)</h4>
                        <ul class="chalk-list">
                            <li>Two generators: Ïƒâ‚, Ïƒâ‚‚</li>
                            <li>NON-abelian (order MATTERS!)</li>
                            <li>Ïƒâ‚Ïƒâ‚‚ â‰  Ïƒâ‚‚Ïƒâ‚</li>
                            <li class="chalk-analogy">Like a Rubik's cube</li>
                        </ul>
                        <div class="chalk-verdict hard">âš  Genuinely hard</div>
                    </div>
                </div>

                <div class="explainer-card chalkboard">
                    <h3 class="card-term">Non-Abelian</h3>
                    <p class="card-intuition">The ORDER of operations changes the result. "Left then right" â‰  "Right then left"</p>
                    <p class="card-formal">A group where ab â‰  ba for some elements a, b</p>
                    <p class="card-example">Rotating a Rubik's cube: R then U gives different result than U then R</p>
                    <p class="card-complexity">This is what makes 3-dog untangling genuinely hard!</p>
                </div>

                <h2>Mathematical Framework</h2>

                <h3>Braid Groups and Generators</h3>
                <p>A braid on <em>n</em> strands has <em>n-1</em> generators. For three dogs, imagine holding three leashes. Each generator describes one specific crossing:</p>

                <!-- Interactive Generator Builder -->
                <div class="interactive-section">
                    <h4 style="font-family: 'Caveat', cursive; font-size: 22px; color: var(--ink-blue); margin-top: 0;">Build Your Own Braid</h4>
                    <p>Click the generators below to compose a braid word and watch it form in 3D!</p>
                    <div id="generator-builder-container"></div>
                </div>

                <p>The generators work as follows:</p>
                <ul>
                    <li><strong>Ïƒâ‚</strong> â€” Left strand crosses OVER middle strand</li>
                    <li><strong>Ïƒâ‚â»Â¹</strong> â€” Left strand crosses UNDER middle strand</li>
                    <li><strong>Ïƒâ‚‚</strong> â€” Middle strand crosses OVER right strand</li>
                    <li><strong>Ïƒâ‚‚â»Â¹</strong> â€” Middle strand crosses UNDER right strand</li>
                </ul>

                <div class="explainer-card graph-paper">
                    <h3 class="card-term">Braid Word</h3>
                    <p class="card-intuition">A recipe for tangling. Each symbol is one crossing move.</p>
                    <p class="card-formal">A sequence of generators and their inverses: Ïƒâ‚Ïƒâ‚‚Ïƒâ‚â»Â¹...</p>
                    <p class="card-example"><span class="highlight-formula">Ïƒâ‚Ïƒâ‚‚Ïƒâ‚â»Â¹</span> = "Left over middle, then middle over right, then left under middle"</p>
                </div>

                <!-- Yang-Baxter Interactive Demo -->
                <div class="interactive-section">
                    <h3>The Magic of Yang-Baxter</h3>
                    <p>Here's the amazing part: some different-looking tangles are actually the same! The <strong>Yang-Baxter equation</strong> says that Ïƒâ‚Ïƒâ‚‚Ïƒâ‚ = Ïƒâ‚‚Ïƒâ‚Ïƒâ‚‚. Watch both paths lead to identical results:</p>
                    <div id="yang-baxter-container"></div>
                </div>

                <div class="explainer-card chalkboard">
                    <h3 class="card-term">Yang-Baxter Equation</h3>
                    <p class="card-intuition">Two different dance moves, same final positions. The math of "it doesn't matter which way you went."</p>
                    <p class="card-formal">Ïƒâ‚Ïƒâ‚‚Ïƒâ‚ = Ïƒâ‚‚Ïƒâ‚Ïƒâ‚‚ â€” The defining relation of Bâ‚ƒ</p>
                    <p class="card-example">This same equation appears in quantum computing, statistical mechanics, and knot theory!</p>
                    <p class="card-complexity">Your dogs are performing quantum algebra on every walk.</p>
                </div>

                <h3>The Word Problem</h3>
                <div class="explainer-card graph-paper">
                    <h3 class="card-term">The Word Problem</h3>
                    <p class="card-intuition">Given two different-looking tangle recipes, do they produce the same tangle?</p>
                    <p class="card-formal">Formally: Given braid words wâ‚ and wâ‚‚, determine if they represent the same element of Bâ‚™.</p>
                    <p class="card-example">Is Ïƒâ‚Ïƒâ‚‚Ïƒâ‚ the same as Ïƒâ‚‚Ïƒâ‚Ïƒâ‚‚? (Yes! Yang-Baxter tells us so)</p>
                    <p class="card-complexity">Solved by Artin (1947) â€” polynomial time in word length</p>
                </div>

                <h3>Measuring Tangle Complexity</h3>
                <p>We can quantify how tangled the leashes are using several metrics:</p>

                <ul>
                    <li><strong>Word length</strong>: Number of generators in the braid word</li>
                    <li><strong>Crossing number</strong>: Minimum crossings in any equivalent representation</li>
                    <li><strong>Writhe</strong>: The signed sum of crossings (positive minus negative)</li>
                </ul>

                <div class="formula">
                Writhe(w) = Î£áµ¢ sign(Ïƒáµ¢)<br>
                where sign(Ïƒáµ¢) = +1, sign(Ïƒáµ¢â»Â¹) = -1
                </div>

                <p class="doodle-annotation">Writhe = 0 doesn't mean untangled! (but it's a good sign)</p>

                <!-- Famous Knots Explorer -->
                <div class="interactive-section">
                    <h3>Famous Knots Gallery</h3>
                    <p>Explore the mathematical knots that have fascinated mathematicians for centuries. Drag to rotate!</p>
                    <div id="famous-knots-container"></div>
                </div>

                <div class="explainer-card chalkboard">
                    <h3 class="card-term">Knot vs Braid</h3>
                    <p class="card-intuition">A <strong>braid</strong> is an open tangle (strands go from top to bottom). A <strong>knot</strong> is what you get when you connect the ends!</p>
                    <p class="card-formal">Markov's Theorem: Every knot/link can be represented as the closure of some braid.</p>
                    <p class="card-example">The trefoil knot = Ïƒâ‚Â³ (three left-over-middle crossings, ends connected)</p>
                    <p class="card-complexity">Alexander (1923) â€” Braids are the key to understanding ALL knots!</p>
                </div>

                <h2>Untangling Strategies</h2>

                <p>This isn't just about abstract mathematicsâ€”it's about helping real walkers with real dogs. How do we actually untangle?</p>

                <h3>1. Greedy Heuristics</h3>
                <p>Simple strategies that work locally but may not find optimal solutions:</p>
                <ul>
                    <li><strong>Nearest-neighbor uncrossing</strong>: Always undo the most recent crossing</li>
                    <li><strong>Writhe minimization</strong>: Move to reduce the signed crossing number</li>
                </ul>

                <div class="explainer-card graph-paper">
                    <h3 class="card-term">Local Minimum Trap</h3>
                    <p class="card-intuition">Sometimes you have to make things temporarily worse to make them better.</p>
                    <p class="card-example"><span class="highlight-formula">Ïƒâ‚Ïƒâ‚‚Ïƒâ‚â»Â¹Ïƒâ‚‚â»Â¹</span> (a commutator) is topologically trivialâ€”the strands end where they startedâ€”but greedy methods can't see it.</p>
                    <p class="card-complexity">Requires 4 moves to simplify, even though the result is identity!</p>
                </div>

                <h3>2. The Garside Algorithm</h3>
                <div class="explainer-card chalkboard">
                    <h3 class="card-term">Garside Normal Form</h3>
                    <p class="card-intuition">A canonical way to write any braid that reveals its true complexity.</p>
                    <p class="card-formal">Decompose braid into fundamental elements Î” and positive words.</p>
                    <p class="card-example">Like reducing fractions: 6/8 â†’ 3/4. Same value, simpler form.</p>
                    <p class="card-complexity">F.A. Garside (1969) â€” The braid's "true name"</p>
                </div>

                <h3>3. Physical Solutions: The Leash Holder Design Challenge</h3>
                <p>But here's the real question: <strong>Can we design a physical device that prevents tangles in the first place?</strong></p>

                <div class="explainer-card graph-paper">
                    <h3 class="card-term">The Engineering Challenge</h3>
                    <p class="card-intuition">Three dogs moving independently in 2D space, attached to one hand. How do we prevent the inevitable?</p>
                    <div class="design-constraints">
                        <div class="constraint"><span class="constraint-icon">ğŸ¦®</span> Dogs must move freely (5-15 foot radius)</div>
                        <div class="constraint"><span class="constraint-icon">ğŸ”„</span> Crossings should auto-resolve or be easily undone</div>
                        <div class="constraint"><span class="constraint-icon">âœ‹</span> One-handed operation (other hand for treats/phone/coffee)</div>
                        <div class="constraint"><span class="constraint-icon">ğŸ’ª</span> Handle 20-80 lbs pull per dog</div>
                        <div class="constraint"><span class="constraint-icon">âš¡</span> Quick release for emergencies</div>
                    </div>
                </div>

                <!-- Device Design Gallery -->
                <div class="device-gallery">

                    <!-- Design 1: Orbital Swivel -->
                    <div class="device-card">
                        <h4 class="device-title">Design 1: The Orbital Swivel</h4>
                        <div class="device-diagram">
                            <img src="images/device-orbital-swivel_2025-11-28T06-59-28-820Z.png" alt="Orbital Swivel device render" class="device-render">
                            <p class="diagram-caption">Three attachment points orbit freely around central hub</p>
                        </div>
                        <div class="device-description">
                            <p><strong>Concept:</strong> Three leash attachment points on a freely-rotating ring around a central hub. As dogs circle each other, the ring rotates to maintain minimum tension.</p>
                            <div class="device-analysis">
                                <div class="analysis-pro">
                                    <span class="analysis-label">âœ“ Pros</span>
                                    <ul>
                                        <li>Simple mechanical design</li>
                                        <li>Passive operation (no batteries)</li>
                                        <li>Handles Ïƒâ‚ and Ïƒâ‚‚ by rotation</li>
                                    </ul>
                                </div>
                                <div class="analysis-con">
                                    <span class="analysis-label">âœ— Cons</span>
                                    <ul>
                                        <li>Cannot resolve Ïƒâ‚Ïƒâ‚‚ sequences</li>
                                        <li>Cumulative crossings still build</li>
                                        <li>Ring can jam under tension</li>
                                    </ul>
                                </div>
                            </div>
                            <p class="device-verdict"><strong>Verdict:</strong> Reduces tangles but doesn't prevent them. Good for casual walks.</p>
                        </div>
                    </div>

                    <!-- Design 2: Vertical Stack -->
                    <div class="device-card">
                        <h4 class="device-title">Design 2: The Vertical Stack</h4>
                        <div class="device-diagram">
                            <img src="images/device-vertical-stack_2025-11-28T06-59-38-596Z.png" alt="Vertical Stack device render" class="device-render">
                            <p class="diagram-caption">Three levels with independent 360Â° swivels</p>
                        </div>
                        <div class="device-description">
                            <p><strong>Concept:</strong> Leashes attach at three different heights, each with its own 360Â° swivel. Crossings in 2D plane don't tangle because dogs are on different "floors."</p>
                            <div class="device-analysis">
                                <div class="analysis-pro">
                                    <span class="analysis-label">âœ“ Pros</span>
                                    <ul>
                                        <li>Eliminates in-plane crossings!</li>
                                        <li>Each dog has independent rotation</li>
                                        <li>Works for any braid sequence</li>
                                    </ul>
                                </div>
                                <div class="analysis-con">
                                    <span class="analysis-label">âœ— Cons</span>
                                    <ul>
                                        <li>Doesn't prevent leash-to-leash contact</li>
                                        <li>Level 1 dog can wrap around Level 3's line</li>
                                        <li>Bulkier design</li>
                                    </ul>
                                </div>
                            </div>
                            <p class="device-verdict"><strong>Verdict:</strong> Best passive solution! Theoretically eliminates Bâ‚ƒ tangles if leashes stay separated.</p>
                        </div>
                    </div>

                    <!-- Design 3: Figure-Eight Track -->
                    <div class="device-card">
                        <h4 class="device-title">Design 3: The Figure-Eight Resolver</h4>
                        <div class="device-diagram">
                            <img src="images/device-figure-eight_2025-11-28T06-59-48-497Z.png" alt="Figure-Eight Resolver device render" class="device-render">
                            <p class="diagram-caption">Leashes slide along figure-8 track, auto-resolving crossings</p>
                        </div>
                        <div class="device-description">
                            <p><strong>Concept:</strong> Leash attachment points slide along a figure-8 shaped track. When dogs cross, the guides naturally follow the track, passing through the center crossing point in sequence.</p>
                            <div class="device-analysis">
                                <div class="analysis-pro">
                                    <span class="analysis-label">âœ“ Pros</span>
                                    <ul>
                                        <li>Actively resolves single crossings</li>
                                        <li>Visual feedback of tangle state</li>
                                        <li>Elegant mathematical design</li>
                                    </ul>
                                </div>
                                <div class="analysis-con">
                                    <span class="analysis-label">âœ— Cons</span>
                                    <ul>
                                        <li>Complex mechanism, many failure points</li>
                                        <li>Still accumulates crossings over time</li>
                                        <li>Friction in track under tension</li>
                                    </ul>
                                </div>
                            </div>
                            <p class="device-verdict"><strong>Verdict:</strong> Beautiful concept but mechanically complex. Better as art piece than practical tool.</p>
                        </div>
                    </div>

                    <!-- Design 4: Active System -->
                    <div class="device-card">
                        <h4 class="device-title">Design 4: The Smart Untangler</h4>
                        <div class="device-diagram">
                            <img src="images/device-smart-untangler_2025-11-28T06-59-59-116Z.png" alt="Smart Untangler device render" class="device-render">
                            <p class="diagram-caption">Electronic hub with display, sensors, and haptic feedback</p>
                        </div>
                        <div class="device-description">
                            <p><strong>Concept:</strong> Electronic system with angle sensors on each leash, tracking the braid word in real-time. Display shows current tangle state, haptic feedback guides you through untangling moves.</p>
                            <div class="device-analysis">
                                <div class="analysis-pro">
                                    <span class="analysis-label">âœ“ Pros</span>
                                    <ul>
                                        <li>Perfect tracking of tangle state</li>
                                        <li>Guided untangling instructions</li>
                                        <li>Could use ML for optimization</li>
                                    </ul>
                                </div>
                                <div class="analysis-con">
                                    <span class="analysis-label">âœ— Cons</span>
                                    <ul>
                                        <li>Batteries, electronics, complexity</li>
                                        <li>Expensive to manufacture</li>
                                        <li>Overkill for most dog walkers</li>
                                    </ul>
                                </div>
                            </div>
                            <p class="device-verdict"><strong>Verdict:</strong> For the serious dog-walker/mathematician. Or a great research project!</p>
                        </div>
                    </div>
                </div>

                <!-- The Winning Design -->
                <div class="explainer-card chalkboard">
                    <h3 class="card-term">ğŸ† The Winning Design: Hybrid Approach</h3>
                    <p class="card-intuition">Combine the vertical stack (Design 2) with simple visual indicators!</p>
                    <div class="winning-design-diagram">
<pre style="font-size: 14px; line-height: 1.4;">
    PRACTICAL 3-LEASH HOLDER v1.0

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         HANDLE GRIP             â”‚
    â”‚   Ergonomic, one-hand operation â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     COLOR-CODED INDICATOR       â”‚
    â”‚  â”Œâ”€REDâ”€â” â”Œâ”€GRNâ”€â” â”Œâ”€BLUâ”€â”       â”‚
    â”‚  â”‚  â†»  â”‚ â”‚  â†»  â”‚ â”‚  â†»  â”‚       â”‚ â† Visual rotation counters
    â”‚  â”‚ +2  â”‚ â”‚  0  â”‚ â”‚ -1  â”‚       â”‚   (twist accumulation)
    â”‚  â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜       â”‚
    â””â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚      â”‚      â”‚
     â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”
     â”‚   VERTICAL SEPARATOR   â”‚
     â”‚     with 3 levels      â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”€â”€â”€â”¤ â—‹ TOP (small dog)     â”œâ”€â”€â”€ Red leash, 360Â° swivel
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”€â”€â”€â”¤ â— MID (med dog)       â”œâ”€â”€â”€ Green leash, 360Â° swivel
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”€â”€â”€â”¤ â—† LOW (large dog)     â”œâ”€â”€â”€ Blue leash, 360Â° swivel
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
       Quick-release
       emergency latch
</pre>
                    </div>
                    <p class="card-example"><strong>Key Features:</strong></p>
                    <ul style="margin: 10px 0; padding-left: 20px; color: rgba(255,255,255,0.9);">
                        <li>Vertical separation eliminates in-plane Bâ‚ƒ crossings</li>
                        <li>Color-coded twist counters show when swivels need manual reset</li>
                        <li>Position dogs by size (heaviest on bottom for stability)</li>
                        <li>No batteries needed - purely mechanical</li>
                    </ul>
                    <p class="card-complexity">Estimated cost: $25-40 to manufacture. Patent pending? ğŸ˜‰</p>
                </div>

                <!-- Call to action -->
                <div class="interactive-section" style="text-align: center; margin: 30px 0;">
                    <h4 style="font-family: 'Caveat', cursive; font-size: 24px; color: var(--chalk);">Want to build one?</h4>
                    <p>The full CAD files and 3D-printable design will be available soon. For now, try the simulation above to understand why three dogs is fundamentally harder than two!</p>
                </div>

                <h2>Computational Complexity</h2>

                <div class="formula">
                Word Problem (decidability): Polynomial in word length (Artin, 1947)<br>
                Shortest Word Problem (optimization): NP-hard (believed)<br>
                Optimal Untangling: PSPACE-hard for general braids
                </div>

                <p>This means:</p>
                <ul>
                    <li>We can <em>verify</em> if a sequence untangles the leashes efficiently</li>
                    <li>We cannot <em>find</em> the shortest sequence efficiently in general</li>
                    <li>For four or more dogs, even approximations become intractable</li>
                </ul>

                <p class="doodle-annotation">Four dogs? Don't even try. Hire a professional mathematician.</p>

                <h2>Connections to Other Fields</h2>

                <h3>Quantum Computing</h3>
                <div class="explainer-card chalkboard">
                    <h3 class="card-term">Topological Quantum Computing</h3>
                    <p class="card-intuition">Quantum computers that use braiding particles instead of flipping bits!</p>
                    <p class="card-formal">Anyonic braiding implements fault-tolerant quantum gates via braid group representations.</p>
                    <p class="card-example">Microsoft's Station Q is building quantum computers based on this principle.</p>
                    <p class="card-complexity">If you solve dog leash tangles, you're doing quantum computation prep!</p>
                </div>

                <h3>Robotics and Motion Planning</h3>
                <p><strong>Solving this problem would also solve:</strong></p>

                <div class="applications-gallery">
                    <div class="application-card">
                        <img src="images/app-surgical-robotics_2025-11-28T07-01-41-496Z.png" alt="Surgical robotics">
                        <div class="application-card-content">
                            <h4>ğŸ¥ Surgical Robotics</h4>
                            <p>Multiple flexible instruments in body cavity must not tangle during operation. Lives depend on efficient untangling!</p>
                        </div>
                    </div>
                    <div class="application-card">
                        <img src="images/app-tethered-drones_2025-11-28T07-01-51-456Z.png" alt="Tethered drone swarms">
                        <div class="application-card-content">
                            <h4>ğŸš Tethered Drone Swarms</h4>
                            <p>Drones connected to base station by cables. Formation changes create crossings. Tangled = crashed!</p>
                        </div>
                    </div>
                    <div class="application-card">
                        <img src="images/app-cable-robot_2025-11-28T07-02-00-652Z.png" alt="Cable-driven parallel robots">
                        <div class="application-card-content">
                            <h4>ğŸ­ Cable-Driven Robots</h4>
                            <p>3D printers, motion platforms, cranes. Multiple cables must not interfere. Same braid group mathematics!</p>
                        </div>
                    </div>
                    <div class="application-card">
                        <img src="images/app-stage-rigging_2025-11-28T07-02-13-690Z.png" alt="Stage rigging">
                        <div class="application-card-content">
                            <h4>ğŸ­ Stage Rigging</h4>
                            <p>Flying performers on multiple wires. Choreography = braid word composition. The show must go on!</p>
                        </div>
                    </div>
                </div>

                <h2>Open Problems & Explorations</h2>

                <h3>The ML Challenge: Can Machines Learn to Untangle?</h3>
                <p>Machine learning has revolutionized game-playing (AlphaGo), protein folding (AlphaFold), and code generation (Copilot). Can it crack braid untangling?</p>

                <div class="ml-approaches-gallery">
                    <!-- Approach 1: RL -->
                    <div class="ml-approach-card">
                        <div class="ml-approach-header">
                            <span class="ml-approach-icon">ğŸ®</span>
                            <h4>Approach 1: Reinforcement Learning</h4>
                        </div>
                        <div class="ml-approach-concept">
                            <p><strong>Concept:</strong> Treat untangling as a game. The agent sees the current braid state, chooses a move (Ïƒáµ¢ or Ïƒáµ¢â»Â¹), and gets rewarded for reducing complexity.</p>
                        </div>
                        <div class="ml-architecture">
<pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         REINFORCEMENT LEARNING AGENT        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  STATE: Current braid word                  â”‚
â”‚    [Ïƒâ‚, Ïƒâ‚‚, Ïƒâ‚â»Â¹, Ïƒâ‚‚, Ïƒâ‚, ...]            â”‚
â”‚              â”‚                              â”‚
â”‚              â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚   POLICY NETWORK    â”‚  (What move next?) â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” â”‚                    â”‚
â”‚  â”‚   â”‚ Ïƒâ‚â”‚Ïƒâ‚â»Â¹â”‚Ïƒâ‚‚â”‚Ïƒâ‚‚â»Â¹â”‚ â”‚  â† Output probs  â”‚
â”‚  â”‚   â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚              â”‚                              â”‚
â”‚              â–¼                              â”‚
â”‚  ACTION: Apply chosen generator             â”‚
â”‚              â”‚                              â”‚
â”‚              â–¼                              â”‚
â”‚  REWARD: +1 if word shortened               â”‚
â”‚          +10 if reached identity (Îµ)        â”‚
â”‚          -0.1 per step (encourages speed)   â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
                        </div>
                        <div class="ml-analysis">
                            <span class="ml-verdict-good">âœ“ Natural formulation, proven success in games</span>
                            <span class="ml-verdict-bad">âœ— Sparse rewards, huge action sequences, local minima</span>
                        </div>
                    </div>

                    <!-- Approach 2: GNN -->
                    <div class="ml-approach-card">
                        <div class="ml-approach-header">
                            <span class="ml-approach-icon">ğŸ•¸ï¸</span>
                            <h4>Approach 2: Graph Neural Networks</h4>
                        </div>
                        <div class="ml-approach-concept">
                            <p><strong>Concept:</strong> Represent the braid as a graph where nodes are strand segments and edges are crossings. GNN learns which crossings to undo.</p>
                        </div>
                        <div class="ml-architecture">
<pre>
     BRAID AS GRAPH REPRESENTATION

     Strand A â—â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â—
                     â•²â•±
     Strand B â—â”€â”€â”€â”€â”€â”€â”€â•³â”€â”€â”€â”€â”€â”€â”€â—
                     â•±â•²
     Strand C â—â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â—

              â†“ Convert to graph

         â”Œâ”€â”€â”€â”      â”Œâ”€â”€â”€â”      â”Œâ”€â”€â”€â”
         â”‚ A â”‚â”€â”€â”€â”€â”€â–¶â”‚ x â”‚â—€â”€â”€â”€â”€â”€â”‚ B â”‚
         â””â”€â”€â”€â”˜      â””â”€â”€â”€â”˜      â””â”€â”€â”€â”˜
                      â”‚
                    edge = crossing
                    node features = position, history

     GNN MESSAGE PASSING:
     1. Each node gathers info from neighbors
     2. Aggregates crossing context
     3. Outputs: "Undo this crossing? [0.0 - 1.0]"
</pre>
                        </div>
                        <div class="ml-analysis">
                            <span class="ml-verdict-good">âœ“ Captures spatial structure, permutation invariant</span>
                            <span class="ml-verdict-bad">âœ— Variable graph size, complex crossing relationships</span>
                        </div>
                    </div>

                    <!-- Approach 3: Transformer -->
                    <div class="ml-approach-card">
                        <div class="ml-approach-header">
                            <span class="ml-approach-icon">ğŸ¤–</span>
                            <h4>Approach 3: Sequence-to-Sequence Transformer</h4>
                        </div>
                        <div class="ml-approach-concept">
                            <p><strong>Concept:</strong> Treat braid words as language. Input: tangled braid word. Output: sequence of moves to untangle. Like translating tangledâ†’untangled.</p>
                        </div>
                        <div class="ml-architecture">
<pre>
    BRAID WORD AS LANGUAGE

    Input:  "Ïƒâ‚ Ïƒâ‚‚ Ïƒâ‚â»Â¹ Ïƒâ‚‚ Ïƒâ‚ Ïƒâ‚‚â»Â¹ Ïƒâ‚â»Â¹"

            â†“ Tokenize â†“

    Tokens: [Ïƒâ‚] [Ïƒâ‚‚] [Ïƒâ‚â»Â¹] [Ïƒâ‚‚] [Ïƒâ‚] [Ïƒâ‚‚â»Â¹] [Ïƒâ‚â»Â¹]

            â†“ Transformer Encoder â†“

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    Self-Attention: Each token          â”‚
    â”‚    attends to all others               â”‚
    â”‚    (captures long-range dependencies)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

            â†“ Transformer Decoder â†“

    Output: "Ïƒâ‚‚ Ïƒâ‚ Ïƒâ‚‚â»Â¹ Ïƒâ‚â»Â¹ Îµ"
            (Simplified sequence â†’ identity)

    Like GPT, but for braids!
</pre>
                        </div>
                        <div class="ml-analysis">
                            <span class="ml-verdict-good">âœ“ State-of-art in sequences, handles long dependencies</span>
                            <span class="ml-verdict-bad">âœ— Needs massive training data, may hallucinate invalid moves</span>
                        </div>
                    </div>
                </div>

                <!-- Data Generation Strategy -->
                <div class="explainer-card chalkboard">
                    <h3 class="card-term">ğŸ² The Data Challenge</h3>
                    <p class="card-intuition">Where do we get millions of training examples?</p>
                    <div class="ml-data-strategy">
<pre style="font-size: 12px; line-height: 1.4;">
TRAINING DATA GENERATION PIPELINE

1. START: Random braid word
   Ïƒâ‚ Ïƒâ‚‚ Ïƒâ‚â»Â¹ Ïƒâ‚‚ Ïƒâ‚ Ïƒâ‚‚â»Â¹ Ïƒâ‚â»Â¹ Ïƒâ‚‚ ...
                    â”‚
2. COMPUTE: Ground truth (Garside Normal Form)
   â†’ Complexity = 5, canonical form = Î”Ïƒâ‚‚...
                    â”‚
3. SIMULATE: Random simplification path
   â†’ One valid sequence of moves to identity
                    â”‚
4. AUGMENT: Generate equivalent braids
   â†’ Apply Yang-Baxter: Ïƒâ‚Ïƒâ‚‚Ïƒâ‚ â†” Ïƒâ‚‚Ïƒâ‚Ïƒâ‚‚
                    â”‚
5. LABEL: (input, optimal_output) pairs

RESULT: Millions of (tangled, solution) pairs
        Ready for supervised learning!
</pre>
                    </div>
                    <p class="card-complexity">Key insight: We can generate infinite training data because we can verify solutions!</p>
                </div>

                <!-- The Reward Function Challenge -->
                <div class="explainer-card graph-paper">
                    <h3 class="card-term">ğŸ¯ Designing the Reward Function</h3>
                    <p class="card-intuition">What should the ML agent optimize for?</p>
                    <div class="reward-comparison">
                        <div class="reward-option">
                            <strong>Option A: Word Length</strong><br>
                            <code>reward = -len(braid_word)</code><br>
                            <em>Simple but ignores structure</em>
                        </div>
                        <div class="reward-option">
                            <strong>Option B: Garside Complexity</strong><br>
                            <code>reward = -garside_length(braid)</code><br>
                            <em>Mathematically rigorous but expensive</em>
                        </div>
                        <div class="reward-option">
                            <strong>Option C: Crossing Count</strong><br>
                            <code>reward = -count_crossings()</code><br>
                            <em>Physical intuition, fast to compute</em>
                        </div>
                        <div class="reward-option highlight">
                            <strong>Option D: Hybrid (Our Choice)</strong><br>
                            <code>reward = -crossings - 0.1*word_len + 100*(is_identity)</code><br>
                            <em>Balances exploration and exploitation</em>
                        </div>
                    </div>
                </div>

                <!-- Conceptual Results -->
                <div class="interactive-section">
                    <h4 style="font-family: 'Caveat', cursive; font-size: 22px; color: var(--ink-blue); margin-top: 0;">Hypothetical Results: ML vs Classical</h4>
                    <div class="ml-results-comparison">
                        <table class="results-table">
                            <thead>
                                <tr>
                                    <th>Method</th>
                                    <th>Avg Steps</th>
                                    <th>Optimal%</th>
                                    <th>Speed</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Greedy (nearest)</td>
                                    <td>12.3</td>
                                    <td>15%</td>
                                    <td>Fast</td>
                                </tr>
                                <tr>
                                    <td>Garside Algorithm</td>
                                    <td>8.1</td>
                                    <td>100%</td>
                                    <td>Slow</td>
                                </tr>
                                <tr class="highlight-row">
                                    <td>RL Agent (trained)</td>
                                    <td>8.4</td>
                                    <td>92%</td>
                                    <td>Fast</td>
                                </tr>
                                <tr class="highlight-row">
                                    <td>Transformer</td>
                                    <td>8.2</td>
                                    <td>89%</td>
                                    <td>Fast</td>
                                </tr>
                            </tbody>
                        </table>
                        <p class="table-note">*Hypothetical results for braids of length 10-20. Real research needed!</p>
                    </div>
                </div>

                <!-- Call to Research -->
                <div class="explainer-card chalkboard" style="text-align: center;">
                    <h3 class="card-term">ğŸ”¬ This Is An Open Research Problem!</h3>
                    <p class="card-intuition">As of 2024, no one has published a comprehensive ML solution for braid simplification.</p>
                    <p style="color: rgba(255,255,255,0.9); margin: 15px 0;">Could YOU be the one to create "AlphaBraid"?</p>
                    <div class="ml-tools-list">
                        <p style="color: rgba(255,255,255,0.7); margin-bottom: 10px;">Tools to explore:</p>
                        <a href="https://pytorch-geometric.readthedocs.io/" target="_blank" class="ml-tool-link">
                            <span class="tool-icon">ğŸ”—</span> PyTorch Geometric <span class="tool-use">(Graph Neural Networks)</span>
                        </a>
                        <a href="https://stable-baselines3.readthedocs.io/" target="_blank" class="ml-tool-link">
                            <span class="tool-icon">ğŸ®</span> Stable Baselines3 <span class="tool-use">(Reinforcement Learning)</span>
                        </a>
                        <a href="https://huggingface.co/docs/transformers" target="_blank" class="ml-tool-link">
                            <span class="tool-icon">ğŸ¤—</span> HuggingFace Transformers <span class="tool-use">(Sequence Models)</span>
                        </a>
                    </div>
                </div>

                <h3>Practical Extensions</h3>
                <ul>
                    <li><strong>Dynamic leashes</strong>: Variable-length leashes (retractableâ€”even harder!)</li>
                    <li><strong>Obstacles</strong>: Trees, poles (adds fundamental group of plane minus points)</li>
                    <li><strong>Multiple walkers</strong>: Each person has multiple dogs</li>
                    <li><strong>Non-planar</strong>: Hills, stairs (3D braids, exponentially more complex)</li>
                </ul>

                <h2>References and Further Reading</h2>
                <ul>
                    <li>Artin, E. (1947). "Theory of Braids." <em>Annals of Mathematics</em></li>
                    <li>Birman, J. (1974). <em>Braids, Links, and Mapping Class Groups</em></li>
                    <li>Kassel, C. & Turaev, V. (2008). <em>Braid Groups</em></li>
                    <li>Garside, F.A. (1969). "The braid group and other groups." <em>Quarterly Journal of Mathematics</em></li>
                    <li>Freedman, M., Kitaev, A., Wang, Z. (2002). "Simulation of Topological Field Theories by Quantum Computers"</li>
                </ul>

                <h2>Conclusion</h2>
                <p>The three-dog leash problem exemplifies how everyday phenomena encode deep mathematical structure. The transition from two to three dogs marks a phase change in complexityâ€”from abelian to non-abelian groups, from trivial to algorithmically hard, from mundane to quantum-mechanical.</p>

                <p>Every time you untangle your dogs' leashes, you're solving a problem that connects to the frontiers of topology, quantum computing, and complexity theory. Mathematics is everywhere, even on your morning walk.</p>

                <p class="doodle-annotation">Now go pet those dogs. They've been doing math all along.</p>
            </div>
        </div>
    </div>

    <div class="crossing-alert" id="crossingAlert"></div>

    <script src="js/vector.js"></script>
    <script src="js/physics.js"></script>
    <script src="js/braid.js"></script>
    <script src="js/entities.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/renderer3d.js"></script>
    <script src="js/simulation.js"></script>
    <script src="js/braid-viz.js"></script>
    <script src="js/leash-demo.js"></script>
    <script src="js/knot-3d.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
